{"version":3,"sources":["index.js"],"names":["util","noop","sax","isClient","isReactNative","context","eval","React","react","ReactDom","reactDom","ReactDOM","SAX","_","lodash","aotoo","Aotoo","require","wrap","combineX","CombineClass","createCombinClass","aotooEventEmitter","extension","plugins","render","jsx","pureRender","fedRender","element","id","targetDom","isString","document","getElementById","isDomElement","rctCls","acts","opts","setAtRender","params","html","version","combinex","item","wrapEx","key","cb","ComposedComponent","func","dom","result","isFun","fun","extend","AotooEventEmitter"],"mappings":"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","file":"../index.js","sourcesContent":["import path from 'path'\nimport react from 'react'\nimport reactDom from 'react-dom'\nimport * as util from './suba/lib'\nimport lodash from 'lodash/lodash.min'\n// const reactDomServer = require('react-com/server')\nconst noop = util.noop\nconst sax  = util.sax\nconst isClient = util.isClient\nconst isReactNative = util.isReactNative\nconst context = isClient ? eval('window') : eval('global')\n\n// if (!isClient) {\n//   if (!isReactNative) {\n//     reactDom = require('react-dom/server')\n//     context.ReactDOMServer = reactDom\n//     context.ReactDomServer = reactDom\n//   }\n// }\n\ncontext.React = react\ncontext.ReactDom = reactDom\ncontext.ReactDOM = reactDom\ncontext.SAX = sax\ncontext._ = lodash\naotoo.context = context\ncontext.Aotoo = aotoo\nconst {\n  wrap, \n  combineX, \n  CombineClass, \n  createCombinClass,\n  aotooEventEmitter\n} = require('./suba/lib/aotoocombinx')\n\nlet extension = { plugins: {} }\nlet render = function (jsx) { return jsx }\nlet pureRender = function (jsx) { return jsx }\n\n// if (!isReactNative) {\n//   console.log('======== 1111');\n//   if (isClient) {\n//     console.log('======== 2222');\n//     render = pureRender = ReactDom.render\n//   } \n//   // else {\n//   //   render = ReactDomServer.renderToString\n//   //   pureRender = ReactDomServer.renderToStaticMarkup\n//   // }\n// }\n\n// 前端render\nfunction fedRender(element, id) {\n  const targetDom = util.isString(id) ? document.getElementById(id) : (util.isDomElement(id)) ? id : ''\n  if (targetDom) {\n    return ReactDom.render(element, targetDom)\n  } else {\n    return element\n  }\n}\n\nfunction aotoo(rctCls, acts, opts) {\n  return createCombinClass(rctCls, acts, opts, extension)\n}\n\nfunction setAtRender(params) {\n  if (isClient) {\n    aotoo.html = aotoo.render = fedRender\n  } \n}\n\naotoo.version = '4.0.17'\naotoo.combinex = combineX\naotoo.CombineClass = CombineClass\naotoo.isClient = isClient\naotoo.isReactNative = isReactNative\nif (isReactNative) {\n  aotoo.render = aotoo.html = render\n} else {\n  setAtRender()\n}\nfor (let item in util) {\n  aotoo[item] = util[item]\n}\n\naotoo.wrapEx = function (key, cb) {\n  aotoo[key] = function (ComposedComponent, opts, func) {\n    return wrap(ComposedComponent, function (dom) {\n      var result = cb(dom, opts, util)\n      var isFun = typeof func == 'function'\n      return isFun ? func(result) : result\n    })\n  }\n}\n\naotoo.plugins = function (key, fun) {\n  aotoo[key] = fun\n  extension.plugins[key] = fun\n}\n\naotoo.extend = function (key, cb) {\n  aotoo[key] = function (opts) {\n    return cb(opts, util)\n  }\n}\n\naotoo.plugins('wrap', wrap)\n\nexport default aotoo\nexport {\n  combineX as combinex,\n  CombineClass,\n  aotooEventEmitter as AotooEventEmitter,\n  wrap\n}"]}