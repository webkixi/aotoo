{"version":3,"sources":["suba/lib/util.js"],"names":["noop","uniqueId","objTypeof","isDomElement","protectProperty","isArray","isObject","isFunction","isString","sizeof","forEach","arr2json","deepFind","uuid","prefix","object","Object","prototype","toString","call","match","obj","nodeType","value","opts","d","enumerable","writable","configurable","undefined","_isReactNative","params","process","chdir","isReactNative","_isClient","window","isClient","_isServer","isServer","length","keys","merge","callback","item","ii","tmp","key","findout","findKey","mykey","split","jj","property","cloneDeep","sax","find","findIndex","filter","isPlainObject"],"mappings":"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","file":"../../../suba/lib/util.js","sourcesContent":["import {\n  cloneDeep,\n  find,\n  findIndex,\n  filter,\n  merge,\n  isPlainObject\n} from \"lodash\";\nimport { sax } from \"./aotooeventemitter\";\n\nlet uuid = 1\nexport function noop() {}\nexport function uniqueId(prefix) {\n  if (!prefix) prefix = 'random_'\n  uuid++\n  return prefix + uuid\n}\n\nexport function objTypeof(object) {\n  return Object.prototype.toString.call(object).match(/^\\[object\\s(.*)\\]$/)[1];\n}\n\nexport function isDomElement(obj) {\n  return typeof obj == 'object' && obj.nodeType\n}\n\n// 循环使用同一对象\n// usage:  Object.defineProperty(obj, \"key\", protectProperty(\"static\"));\nexport function protectProperty(value, opts) {\n  var d = protectProperty.d || (\n    protectProperty.d = {\n      enumerable: false,\n      writable: true,\n      configurable: true,\n      value: null\n    }\n  );\n  if (isObject(opts)) {\n    d = merge(d, opts)\n  }\n  d.value = value||undefined;\n  return d;\n}\n// ... 并且 ...\n\nfunction _isReactNative(params) {\n  // return window.__BUNDLE_START_TIME__ ? false : true\n  if (typeof process !== 'undefined') {\n    return process.chdir ? false : true\n  }\n}\nexport const isReactNative = _isReactNative()\n\nfunction _isClient() {\n  return !isReactNative && typeof window !== 'undefined'\n}\nexport const isClient = _isClient()\n\nfunction _isServer() {\n  // return !isClient && typeof process !== 'undefined' && process.title == 'node'\n  return (!isClient && typeof process !== 'undefined' && process.chdir) ? true : false\n}\nexport const isServer = _isServer()\n\n\n\nexport function isArray(obj) {\n  return objTypeof(obj) == 'Array'\n}\n\nexport function isObject(obj) {\n  return objTypeof(obj) == 'Object'\n}\n\nexport function isFunction(obj) {\n  return objTypeof(obj) == 'Function'\n}\n\nexport function isString(obj) {\n  return objTypeof(obj) == 'String'\n}\n\nexport function sizeof(obj) {\n  if (obj) {\n    if (isArray(obj) || isString(obj)) return obj.length\n    if (isObject(obj)) return Object.keys(obj).length\n  }\n}\n\nexport { merge }\n// export function merge(obj) {\n//   var i = 1\n//     , target\n//     , key;\n\n//   for (; i < arguments.length; i++) {\n//     target = arguments[i];\n//     for (key in target) {\n//       if (Object.prototype.hasOwnProperty.call(target, key)) {\n//         obj[key] = target[key];\n//       }\n//     }\n//   }\n//   return obj;\n// }\n\nexport function forEach(obj, callback) {\n  if (typeof obj == 'object') {\n    if (isArray(obj)) {\n      obj.forEach(function(item, ii) {\n        callback(ii, item)\n      })\n    }\n\n    if (isObject(obj)) {\n      Object.keys(obj).forEach(function(item, ii) {\n        callback(item, ii, obj[item])\n      })\n    }\n  }\n}\n\nexport function arr2json(obj) {\n  var tmp = {}\n  if (isArray(obj)) {\n    forEach(obj, function(ii, item) {\n      tmp[ii] = item\n    })\n    return tmp\n  }\n}\n\nexport function deepFind(obj, key) {\n  var findout = {}\n  var findKey = false\n  var mykey = key.split('->')\n  if (mykey.length>1) {\n    for( var jj=0; jj<mykey.length; jj++) {\n      var property = mykey[jj]\n      findout = jj == 0 ? obj[property] : findout[property]\n      if (!findout) break;\n    }\n  } else {\n    key = mykey[0]\n    findout = obj[key]\n  }\n  findKey = findout ? true : false\n  return findout\n}\n\n// export function find(collection, callback, forindex) {\n//   if (isObject(callback) || isString(callback) || isArray(callback)) {\n//     if (isString(callback)) {\n//       callback = [callback]\n//     }\n//     if (isArray(callback)) {\n//       var tmp = {}\n//       for(var ii=0; ii<callback.length; ii++) {\n//         if (ii%2==0) {\n//           tmp[callback[ii]] = callback[(ii+1)]||true\n//         } else{\n//           continue;\n//         }\n//       }\n//       callback = tmp\n//     }\n\n//     var select = {}\n//     var selected = []\n//     for (let index=0; index<collection.length; index++) {\n//       let o = collection[index]\n//       forEach(callback, function(key, ii) {\n//         if (o[key] == callback[key]) {\n//           select[index] = true\n//         } else if(callback[key]==true&&o[key]){\n//           select[index] = true\n//         } else {\n//           select[index] = false\n//         }\n//       })\n//       if (select[index]) break;\n//     }\n    \n//     if (sizeof(select)) {\n//       forEach(select, function (_index, ii) {\n//         if (select[_index]) selected.push(_index)\n//       })\n//       if (selected.length) {\n//         if (forindex) return selected[0]\n//         return collection[selected[0]]\n//       }\n//     }\n//   }\n// }\n\n// export function findIndex(collection, callback) {\n//   return find(collection, callback, true)\n// }\n\n// export function filter(collection, callback) {\n//   return collection.filter(callback)\n// }\n\nexport {\n  cloneDeep,\n  sax,\n  find,\n  findIndex,\n  filter,\n  isPlainObject\n}\n"]}